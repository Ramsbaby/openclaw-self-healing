# Discord 포맷팅 자가검토

> 적용 후 문제점 체크

---

## 체크리스트

### 1. TQQQ 15분 모니터링

#### ✅ 적용된 기능
- [x] 헤더 (`#`)
- [x] 서브텍스트 (`-#`)
- [x] 테이블
- [x] ANSI 컬러 블록
- [x] 블록 인용 (`>>>`) - 자기평가
- [x] 코드 블록 (bash)

#### ⚠️ 잠재적 문제

**1. ANSI 컬러 코드 이스케이핑**
```
✅ = \u001b[1;32m전략: HOLD\u001b[0m
```
→ **문제:** JSON 문자열에서 `\u001b`가 이스케이프 처리됨
→ **해결:** `\\u001b`로 이중 이스케이프 필요

**현재 상태:** 스크립트에서 이미 `\\u001b` 사용 ✅

**2. 테이블 앞뒤 빈 줄**
```
## 🕐 XX:XX 업데이트

| 구분 | 달러 | 원화 |
```
→ **문제:** 헤더와 테이블 사이 빈 줄 없음
→ **MEMORY.md 규칙:** 테이블 앞뒤 빈 줄 필수

**현재 상태:** ❌ 빈 줄 없음 → 수정 필요

**3. 이모지 개수**
헤더 2개 (📊, 🕐) + 상태 4개 (✅⚠️🔴🟢) + 평가 1개 (💡) = 7개
→ **MEMORY.md 규칙:** 3개 이하
→ **현재 상태:** ⚠️ 초과 → 줄이기

**4. 타임스탭프 플레이스홀더**
```
<t:TIMESTAMP:F>
```
→ **문제:** TIMESTAMP를 실제 유닉스 타임스탬프로 교체해야 함
→ **해결:** 크론 실행 시 AI가 `Date.now()/1000`으로 계산해야 함
→ **현재 상태:** ⚠️ 플레이스홀더 그대로 (AI가 처리할 수 있는지 불확실)

---

### 2. 모닝 브리핑

#### ✅ 적용된 기능
- [x] 헤더 (`#`)
- [x] 서브텍스트 (`-#`)
- [x] 테이블
- [x] 블록 인용 (루머, 자기평가)
- [x] 타임스탬프
- [x] 코드 블록

#### ⚠️ 잠재적 문제

**1. 테이블 앞뒤 빈 줄**
여러 곳에서 누락 → 수정 필요

**2. 이모지 개수**
☀️💱📈🔥🔮💡 + 테이블 내부 = 6개+
→ ⚠️ MEMORY.md 규칙 위반

**3. 타임스탬프**
`<t:TIMESTAMP:F>` → 플레이스홀더
→ AI가 실시간 계산 필요

---

### 3. Daily Wrap-up

#### ✅ 적용된 기능
- [x] 헤더 (`#`)
- [x] 서브텍스트 (`-#`)
- [x] 테이블 (시스템 상태)
- [x] 블록 인용 (Claude 사용량, 자기평가)
- [x] 타임스탬프

#### ⚠️ 잠재적 문제

동일: 테이블 빈 줄, 이모지 개수, 타임스탬프

---

## 공통 문제점 요약

### 🔴 Critical (즉시 수정)

1. **테이블 앞뒤 빈 줄 누락**
   - MEMORY.md 필수 규칙
   - Discord 렌더링 깨질 수 있음

2. **이모지 개수 초과**
   - 규칙: 3개 이하
   - 현재: 6~7개
   - 가독성 오히려 저하

### 🟡 Warning (검증 필요)

3. **타임스탬프 플레이스홀더**
   - AI가 `<t:TIMESTAMP:F>`를 실제 값으로 교체할 수 있나?
   - 테스트 필요

4. **ANSI 컬러 모바일 미지원**
   - Discord 모바일에서 안 보임
   - 대안: 이모지만 사용

---

## 수정안

### Fix 1: 테이블 빈 줄 추가

**Before:**
```
## 🕐 XX:XX 업데이트
| 구분 | 달러 | 원화 |
```

**After:**
```
## 🕐 XX:XX 업데이트

| 구분 | 달러 | 원화 |
```

**모든 테이블에 적용 필요**

---

### Fix 2: 이모지 최소화

**Before:** 📊🕐💱📈🔥🔮💡 (7개)

**After:** 📊💡 (2개)
- 헤더: 📊만 유지
- 자기평가: 💡만 유지
- 나머지: 텍스트로 대체

**예시:**
```
## TQQQ 업데이트
| ... |

전략: HOLD
근거: 상승 추세

💡 개선: XXX
```

---

### Fix 3: 타임스탬프 → 텍스트

**Before:**
```
-# <t:TIMESTAMP:F>
```

**After:**
```
-# 2026.02.04 16:15 KST
```

AI가 날짜/시각 문자열 생성은 확실히 가능.

---

### Fix 4: ANSI 컬러 → 이모지 (모바일 대응)

**Before:**
```ansi
\u001b[1;32m✅ 전략: HOLD\u001b[0m
```

**After:**
```
✅ 전략: HOLD (상승 추세)
```

ANSI 블록 제거, 이모지만 사용.

---

## 최종 권장사항

### Option A: 보수적 (안전)
1. 테이블 빈 줄 추가
2. 이모지 3개 이하로 축소
3. 타임스탬프 → 텍스트
4. ANSI 컬러 → 이모지
5. 헤더 + 테이블만 사용

**장점:** 100% 작동 보장
**단점:** 고급 기능 활용 못 함

---

### Option B: 적극적 (테스트)
1. 테이블 빈 줄 추가
2. 이모지 5개까지 허용 (규칙 완화)
3. 타임스탬프 AI 계산 시도
4. ANSI 컬러 Desktop 전용 사용
5. 헤더 + 테이블 + 블록 인용 + 컬러

**장점:** Discord 고급 기능 최대 활용
**단점:** 실패 가능성, 모바일 지원 불완전

---

## 즉시 적용 (Option A)

### 수정 스크립트
1. 테이블 앞뒤 `\n\n` 추가
2. 이모지 3개로 축소 (📊💡만)
3. `<t:TIMESTAMP:F>` → 날짜 문자열 생성 지시
4. ANSI 블록 제거

**예상 시간:** 5분

---

## 검증 방법

### 16:15 TQQQ 크론 실행 후
1. Discord에서 렌더링 확인
2. 테이블 정상 표시?
3. 헤더 굵게 표시?
4. 블록 인용 회색 배경?
5. 자기평가 제대로 나옴?

### 실패 시
→ Option A (보수적)로 즉시 롤백

---

## 최종 결정 필요

**정우님께:**
- Option A (안전) vs Option B (테스트)?
- 이모지 개수 규칙 완화 (5개)할까요?
- ANSI 컬러 Desktop 전용 사용할까요?

**자비스 권장:**
Option A로 먼저 가고, 성공하면 점진적으로 B 적용.
