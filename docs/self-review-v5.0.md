# Self-Review V5.0 시스템 문서

> 버전: 5.0
> 적용일: 2026-02-07
> 상태: Week 1 파일럿

---

## 🎯 핵심 철학

| 원칙 | 설명 |
|------|------|
| **측정 가능한 것만 자동화** | 토큰, 시간만 자동 수집 |
| **편향 인정** | LLM 자기평가의 한계 인정 |
| **외부 검증 의무화** | 주간 Opus 검증 |
| **PDCA 통합** | 지속적 개선 루프 |

---

## 🏗️ 아키텍처

```
┌─────────────────────────────────────────────────────────┐
│ Layer 1: 자동 메트릭 수집                                │
│ • duration_sec (응답 시간)                              │
│ • tokens_in/out (토큰 사용량)                           │
│ • exit_status (성공/실패)                               │
└─────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────┐
│ Layer 2: LLM 자기성찰                                   │
│ • what_went_wrong (무엇이 잘못됐나)                     │
│ • why (왜 그랬나)                                       │
│ • next_action (다음 액션)                               │
│ • bias_check (편향 점검)                                │
└─────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────┐
│ Layer 3: 외부 검증 (주간)                               │
│ • 검증자: Claude Opus                                   │
│ • 빈도: 일요일 23:30                                    │
│ • 비용: ~$0.60/월                                       │
└─────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────┐
│ Layer 4: PDCA 사이클                                    │
│ • Plan (일요일): 다음 주 목표 설정                      │
│ • Do (월~금): 크론 실행 + 자기성찰                      │
│ • Check (토요일): 주간 리뷰                             │
│ • Act (일요일): 시스템 개선                             │
└─────────────────────────────────────────────────────────┘
```

---

## 📁 파일 구조

```
~/openclaw/
├── templates/
│   └── self-review-v5.0.yaml       # YAML 템플릿
├── scripts/
│   ├── self-review-logger.sh       # 자동 기록 스크립트
│   └── weekly-review-collector.sh  # 주간 데이터 수집
├── memory/
│   ├── self-review/                # Layer 2 일일 기록
│   │   ├── 2026-02-07/
│   │   │   ├── TQQQ_5분_모니터링.yaml
│   │   │   └── ...
│   │   └── ...
│   └── weekly-review/              # Layer 3 주간 리포트
│       ├── 2026-W06.md
│       └── ...
└── docs/
    └── self-review-v5.0.md         # 이 문서
```

---

## 🔧 사용법

### 크론에서 V5.0 자기평가 기록

```bash
# 크론 종료 시 호출
bash ~/openclaw/scripts/self-review-logger.sh \
  "크론명" \
  "8.2" \           # duration_sec
  "150" \           # tokens_in
  "300" \           # tokens_out
  "ok" \            # exit_status
  "Yahoo 지연 명시 누락" \   # what_went_wrong
  "습관적 생략" \            # why
  "다음부터 지연 태그 추가"  # next_action
```

### 주간 데이터 수집

```bash
bash ~/openclaw/scripts/weekly-review-collector.sh
```

---

## 📊 성공 기준

| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| 자동 메트릭 수집률 | >80% | YAML 파일 존재 여부 |
| Layer 2 형식 준수율 | >70% | 주간 리뷰에서 카운트 |
| 외부 검증 실행률 | 100% | 크론 실행 로그 |
| 개선 실행률 | >50% | 다음 주 체크 |

---

## 🚀 마이그레이션 로드맵

| 주차 | 작업 | 상태 |
|------|------|------|
| Week 1 | Layer 1 자동 메트릭 + 파일럿 5개 | ⏳ 진행중 |
| Week 2 | Layer 2 YAML 형식 10개 전환 | ⬜ 대기 |
| Week 3 | Layer 3 외부 검증 크론 | ⬜ 대기 |
| Week 4 | Layer 4 PDCA 사이클 시작 | ⬜ 대기 |
| Week 5 | 전체 크론 마이그레이션 | ⬜ 대기 |

---

## ⚠️ 알려진 한계

1. **LLM 자기평가 편향** - 완전 해결 불가, 외부 검증으로 완화
2. **도구 호출 횟수** - 자동 수집 불가 (OpenClaw 내부 카운터 없음)
3. **정확도** - 정답 없으면 측정 불가

---

## 📝 변경 이력

| 날짜 | 버전 | 변경 내용 |
|------|------|----------|
| 2026-02-07 | 5.0 | 초기 설계 및 구현 |

---

*"측정할 수 없으면 개선할 수 없다. 하지만 측정할 수 없는 것을 억지로 측정하면 거짓만 남는다."*
